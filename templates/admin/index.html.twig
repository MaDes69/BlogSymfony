{# templates/admin/index.html.twig #}

{% extends "base.html.twig" %}

{% block title %}Admin. |
	{{ parent() }}
{% endblock %}

{% block content %}
	<div class="admin-page">
		<div class="container">
			<div class="row">
				<div class="col s12">
					<a href="{{ path('article_add') }}" class="btn btn-outline-info m-2" style=" float: right">Ajouter</a>
					<h3>Articles</h3>
					<table class="table table-hover">
						<tr class="table-info">
							<th scope="col">#</th>
							<th scope="col">Titre</th>
							<th scope="col">Publier</th>
							<th scope="col">Date de publication</th>
							<th scope="col">Date de modification</th>
							<th scope="col">Actions</th>
						</tr>
						{% set i = 1 %}
						{% for article in articles %}
							<tr>
								<td>{{ i }}</td>
								<td>
									<a href="{{ path('article_show', {'id': article.id}) }}" target="_blank">{{ article.title }}</a>
								</td>
								<td>
									<span class="badge {{ article.isPublished ? 'blue' : 'red' }}">
										{{ article.isPublished ? 'oui' : 'non' }}
									</span>
								</td>
								<td>{{ article.isPublished ? article.publicationDate|date('d/m/Y') : '-' }}</td>
								<td>{{ article.lastUpdateDate|date('d/m/Y') }}</td>
								{# <td>{{ article.categories}}</td> #}
								<td>
									<a href="{{ path('article_edit', {'id': article.id}) }}">
										<i class="ri-pencil-line"></i>
									</a>
									<a href="{{ path('article_remove', {'id': article.id}) }}">
										<i class="ri-delete-bin-2-line"></i>
									</a>
								</td>
							</tr>
							{% set i = i+1 %}
						{% endfor %}
					</table>
				</div>
			</div>

			<div class="row">
				<div class="col s12 m-t-30">
					<h3>Utilisateurs</h3>
					<table class="table table-hover">
						<tr class="table-info">
							<th scope="col">#</th>
							<th scope="col">Adresse email</th>
							<th scope="col">Username</th>
							<th scope="col">Roles</th>
							<th scope="col">Actions</th>
						</tr>
						{% set i = 1 %}
						{% for user in users %}
							<tr>
								<td>{{ i }}</td>
								<td>{{ user.email }}</td>
								<td>{{ user.username }}</td>
								<td>
									<span>
										admin.
									</span>
								</td>
								<td>
									<a href="">
										<i class="ri-delete-bin-2-line"></i>
									</a>
								</td>
							</tr>
							{% set i = i+1 %}
						{% endfor %}
					</table>
				</div>
			</div>
		</div>
	</div>
{% endblock %}
